var Fireworks2=function(){function u(){v();t=document.createElement("canvas");n=t.getContext("2d");r=document.createElement("canvas");i=r.getContext("2d");f(12);l();document.body.appendChild(t);document.addEventListener("keyup",a,true);document.addEventListener("keydown",a,true);document.addEventListener("touchend",a,true);c()}function a(){d()}function f(e){var t=e*10;r.width=t;r.height=t;i.globalCompositeOperation="source-over";for(var n=0;n<100;n++){var s=n*e;var o=s%t;var u=Math.floor(s/t)*e;i.fillStyle="hsl("+Math.round(n*3.6)+",100%,60%)";i.fillRect(o,u,e,e);i.drawImage(Library.bigGlow,o,u)}}function l(){t.width=s;t.height=o}function c(){h();requestAnimFrame(c);p()}function h(){n.fillStyle="rgba(0,0,0,0.2)";n.fillRect(0,0,s,o)}function p(){var t=e.length;while(t--){var i=e[t];if(i.update()){e.splice(t,1);if(!i.usePhysics){if(Math.random()<.8){FireworkExplosions.star(i)}else{FireworkExplosions.circle(i)}}}i.render(n,r)}}function d(t,n,r,i,u){t=t||{};n=n||{};r=r||{};e.push(new Particle({x:t.x||s*.5,y:t.y||o+10},{y:n.y||150+Math.random()*100},{x:r.x||Math.random()*3-1.5,y:r.y||0},i||Math.floor(Math.random()*100)*12,u))}function v(){s=window.innerWidth;o=window.innerHeight}var e=[],t=null,n=null,r=null,i=null,s=0,o=0;return{initialize:u,createParticle:d}}();var Particle=function(e,t,n,r,i){this.GRAVITY=.06;this.alpha=1;this.easing=Math.random()*.02;this.fade=Math.random()*.1;this.gridX=r%120;this.gridY=Math.floor(r/120)*12;this.color=r;this.pos={x:e.x||0,y:e.y||0};this.vel={x:n.x||0,y:n.y||0};this.lastPos={x:this.pos.x,y:this.pos.y};this.target={y:t.y||0};this.usePhysics=i||false};Particle.prototype={update:function(){this.lastPos.x=this.pos.x;this.lastPos.y=this.pos.y;if(this.usePhysics){this.vel.y+=this.GRAVITY;this.pos.y+=this.vel.y;this.alpha-=this.fade}else{var e=this.target.y-this.pos.y;this.pos.y+=e*(.03+this.easing);this.alpha=Math.min(e*e*5e-5,1)}this.pos.x+=this.vel.x;return this.alpha<.005},render:function(e,t){var n=Math.round(this.pos.x),r=Math.round(this.pos.y),i=(n-this.lastPos.x)*-5,s=(r-this.lastPos.y)*-5;e.save();e.globalCompositeOperation="lighter";e.globalAlpha=Math.random()*this.alpha;e.fillStyle="rgba(255,255,255,0.3)";e.beginPath();e.moveTo(this.pos.x,this.pos.y);e.lineTo(this.pos.x+1.5,this.pos.y);e.lineTo(this.pos.x+i,this.pos.y+s);e.lineTo(this.pos.x-1.5,this.pos.y);e.closePath();e.fill();e.drawImage(t,this.gridX,this.gridY,12,12,n-6,r-6,12,12);e.drawImage(Library.smallGlow,n-3,r-3);e.restore()}};var Library={bigGlow:document.getElementById("big-glow"),smallGlow:document.getElementById("small-glow")};var FireworkExplosions={circle:function(e){var t=100;var n=Math.PI*2/t;while(t--){var r=4+Math.random()*4;var i=t*n;Fireworks2.createParticle(e.pos,null,{x:Math.cos(i)*r,y:Math.sin(i)*r},e.color,true)}},star:function(e){var t=6+Math.round(Math.random()*15);var n=3+Math.round(Math.random()*7);var r=10;var i=80;var s=-(Math.random()*3-6);var o=0;var u=0;var a=Math.PI*2;var f=Math.random()*a;do{o=u;u=(u+n)%t;var l=o/t*a-f;var c=(o+n)/t*a-f;var h={x:e.pos.x+Math.cos(l)*i,y:e.pos.y+Math.sin(l)*i};var p={x:e.pos.x+Math.cos(c)*i,y:e.pos.y+Math.sin(c)*i};var d={x:p.x-h.x,y:p.y-h.y,a:c-l};for(var v=0;v<r;v++){var m=v/r;var g=l+m*d.a;Fireworks2.createParticle({x:h.x+m*d.x,y:h.y+m*d.y},null,{x:Math.cos(g)*s,y:Math.sin(g)*s},e.color,true)}}while(u!==0)}};window.onload=function(){Fireworks2.initialize()}